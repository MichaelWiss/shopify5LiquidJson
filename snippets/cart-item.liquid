{% comment %}
  Renders a single cart item with image, title, quantity controls, and remove button.
  
  Accepts:
  - item: {Object} Cart line item (required)
  - line_index: {Number} Line item index (required)
  - include_aria_labels: {Boolean} Whether to include aria-label attributes (default: false)
  
  Usage:
  {% render 'cart-item', item: item, line_index: forloop.index %}
  {% render 'cart-item', item: item, line_index: forloop.index, include_aria_labels: true %}
{% endcomment %}

<div class="cart-item" data-line-item="{{ line_index }}">
  <div class="cart-item__image">
    {% if item.image %}
      <img 
        src="{{ item.image | image_url: width: 200 }}" 
        alt="{{ item.title }}" 
        width="120" 
        height="150" 
        loading="lazy">
    {% endif %}
  </div>

  <div class="cart-item__details">
    <div class="cart-item__header">
      <h3 class="cart-item__title">{{ item.product.title }}</h3>
      <div class="cart-item__quantity">
        <button 
          class="cart-item__qty-btn" 
          data-action="decrease" 
          data-line="{{ line_index }}"
          {% if include_aria_labels %}aria-label="Decrease quantity"{% endif %}>âˆ’</button>
        <span class="cart-item__qty-value">{{ item.quantity }}</span>
        <button 
          class="cart-item__qty-btn" 
          data-action="increase" 
          data-line="{{ line_index }}"
          {% if include_aria_labels %}aria-label="Increase quantity"{% endif %}>+</button>
      </div>
      <div class="cart-item__price">{{ item.final_line_price | money }}</div>
    </div>

    <div class="cart-item__meta">
      {% unless item.variant.title == 'Default Title' %}
        {% for option in item.options_with_values %}
          <p class="cart-item__option">{{ option.value }}</p>
        {% endfor %}
      {% endunless %}
      
      {% if item.variant.sku != blank %}
        <p class="cart-item__sku">{{ item.variant.sku }}</p>
      {% endif %}

      <button class="cart-item__remove" data-line="{{ line_index }}">Remove</button>
    </div>

    {% if item.properties.sidemark %}
      <p class="cart-item__sidemark">Add Sidemark</p>
    {% endif %}
  </div>
</div>
